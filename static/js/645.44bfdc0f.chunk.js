"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[645],{8645:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var r=n(5861),a=n(4942),c=n(1413),o=n(9439),s=n(4687),u=n.n(s),i=n(2791),l=n(4420),d=n(9085),m=n(2948),h=n(3553),f=function(e){return e.contacts.items},p=function(e){return e.contacts.isLoading.fetchContacts},_=function(e){return e.contacts.isLoading.addContact},b=function(e){return e.contacts.isLoading.deletedContactId},v=function(e){return e.contacts.isLoading.updateContact},x=function(e){return e.contacts.error},g=function(e){return e.filter},C=(0,h.P1)([f,g],(function(e,t){return e.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))})),j=n(4894),w="ContactForm_form__dhl+T",N="ContactForm_label__-cVXI",y="ContactForm_input__Bl93P",k="ContactForm_button__eSwX9",Z=n(3329),F=function(e){var t=e.name,n=e.number,r=e.handleChange,a=e.handleSubmit,c=e.isLoading,o=e.buttonText;return(0,Z.jsxs)("form",{className:w,onSubmit:a,children:[(0,Z.jsxs)("label",{className:N,htmlFor:"",children:["Name",(0,Z.jsx)("input",{className:y,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' \\-][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan.",required:!0,value:t,onChange:r})]}),(0,Z.jsxs)("label",{className:N,htmlFor:"",children:["Number",(0,Z.jsx)("input",{className:y,type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[ .\\-\\s]?\\(?\\d{1,3}?\\)?[ .\\-\\s]?\\d{1,4}[ .\\-\\s]?\\d{1,4}[ .\\-\\s]?\\d{1,9}",title:"number number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,value:n,onChange:r})]}),(0,Z.jsx)("button",{className:k,type:"submit",children:c?(0,Z.jsx)(j.Z,{height:"16",width:"16",colors:["#e3e3ee","#e3e3ee"],size:"s"}):o})]})},I=function(){var e=(0,l.I0)(),t=(0,l.v9)(f),n=(0,l.v9)(_),s=(0,i.useState)({name:"",number:""}),h=(0,o.Z)(s,2),p=h[0],b=h[1],v=p.name,x=p.number,g=function(){var t=(0,r.Z)(u().mark((function t(){return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e((0,m.uK)(p));case 3:d.Am.success('New contact "'.concat(v,'" has been added successfully'),{position:"top-right",theme:"colored"}),b({name:"",number:""}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();return(0,Z.jsx)(F,{name:v,number:x,handleChange:function(e){var t=e.currentTarget,n=t.name,r=t.value;b((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},n,r))}))},handleSubmit:function(e){e.preventDefault(),t.some((function(e){return e.name.toLowerCase()===v.toLowerCase().trim()}))?d.Am.warn("".concat(v," is already in your contacts"),{position:"top-right",theme:"colored"}):t.some((function(e){return e.number===x.trim()}))?d.Am.warn("".concat(x," is already in your contacts"),{position:"top-right",theme:"colored"}):g()},isLoading:n,buttonText:"Add contact"})},L=function(e){var t=e.contactId,n=e.currentName,s=e.currentNumber,h=e.onSave,f=(0,l.I0)(),p=(0,l.v9)(v),_=(0,i.useState)({id:t,name:n,number:s}),b=(0,o.Z)(_,2),x=b[0],g=b[1],C=x.id,j=x.name,w=x.number;console.log(C);var N=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f((0,m.Tk)(x));case 3:d.Am.success('Contact "'.concat(j,'" has been updated successfully'),{position:"top-right",theme:"colored"}),h(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsx)(F,{name:j,number:w,handleChange:function(e){var t=e.currentTarget,n=t.name,r=t.value;g((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},n,r))}))},handleSubmit:function(e){e.preventDefault(),N()},isLoading:p,buttonText:"Update contact"})},T=n(4164),A="Modal_backdrop__xTnIT",S="Modal_content__gGb69",z=document.querySelector("#modal-root"),E=function(e){var t=e.onClose,n=e.children;(0,i.useEffect)((function(){var e=function(e){"Escape"===e.code&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t]);return(0,T.createPortal)((0,Z.jsx)("div",{className:A,onClick:function(e){e.currentTarget===e.target&&t()},children:(0,Z.jsx)("div",{className:S,children:n})}),z)},B="ContactItem_item__gxreB",P="ContactItem_buttons__Juk+z",q="ContactItem_button__IRFBz",J=function(e){var t=e.id,n=e.name,a=e.number,c=(0,l.I0)(),s=(0,l.v9)(b),h=(0,i.useState)(!1),f=(0,o.Z)(h,2),p=f[0],_=f[1],v=function(){return _((function(e){return!e}))},x=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c((0,m.GK)(t));case 3:d.Am.success('Contact "'.concat(n,'" has been deleted successfully'),{position:"top-right",theme:"colored"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("li",{className:B,children:[(0,Z.jsxs)("p",{children:[n,": ",a]}),(0,Z.jsxs)("div",{className:P,children:[(0,Z.jsx)("button",{className:q,type:"button",onClick:v,children:"Update"}),(0,Z.jsx)("button",{className:q,type:"button",onClick:x,children:s===t?(0,Z.jsx)(j.Z,{height:"16",width:"16",colors:["#e3e3ee","#e3e3ee"],size:"s"}):"Delete"})]})]}),p&&(0,Z.jsx)(E,{onClose:v,children:(0,Z.jsx)(L,{contactId:t,currentName:n,currentNumber:a,onSave:v})})]})},X="ContactList_wrapper__VP-XU",D=function(){var e=(0,l.I0)(),t=(0,l.v9)(p),n=(0,l.v9)(x),r=(0,l.v9)(C);return(0,i.useEffect)((function(){e((0,m.yF)())}),[e]),(0,Z.jsx)(Z.Fragment,{children:(0,Z.jsxs)("ul",{className:X,children:[t&&!n&&(0,Z.jsx)(j.Z,{height:"60",width:"60",colors:["#383848","#383848"],size:"m"}),r.length>0&&r.map((function(e){return(0,Z.jsx)(J,{id:e.id,name:e.name,number:e.number},e.id)}))]})})},K=n(4821),M="Filter_wrapper__9Ksqy",U="Filter_label__vEd1E",G="Filter_input__N7T3z",H=function(){var e=(0,l.I0)(),t=(0,l.v9)(g);return(0,Z.jsx)("form",{className:M,children:(0,Z.jsxs)("label",{className:U,children:["Find contacts by name",(0,Z.jsx)("input",{className:G,type:"text",name:"filter",value:t,onChange:function(t){var n=t.currentTarget.value;e((0,K.T)(n))}})]})})},V="Contacts_section__lhdxY",W="Contacts_container__TJkHA",R="Contacts_service__XBWWt",Y="Contacts_title__HJPSk",$=function(){return(0,Z.jsxs)("section",{className:V,children:[(0,Z.jsx)("h1",{className:Y,children:"Contacts"}),(0,Z.jsxs)("div",{className:W,children:[(0,Z.jsxs)("div",{className:R,children:[(0,Z.jsx)(I,{}),(0,Z.jsx)(H,{})]}),(0,Z.jsx)(D,{})]})]})}}}]);
//# sourceMappingURL=645.44bfdc0f.chunk.js.map