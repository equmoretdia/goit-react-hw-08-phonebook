"use strict";(self.webpackChunkgoit_react_hw_08_phonebook=self.webpackChunkgoit_react_hw_08_phonebook||[]).push([[925],{925:function(e,n,t){t.r(n),t.d(n,{default:function(){return ee}});var r=t(5861),a=t(4942),c=t(1413),o=t(9439),s=t(4687),u=t.n(s),i=t(2791),l=t(4420),d=t(9085),m=t(2948),h=t(3553),p=function(e){return e.contacts.items},f=function(e){return e.contacts.isLoading.fetchContacts},_=function(e){return e.contacts.isLoading.addContact},b=function(e){return e.contacts.isLoading.deletedContactId},v=function(e){return e.contacts.isLoading.updateContact},x=function(e){return e.contacts.error},g=function(e){return e.filter},C=(0,h.P1)([p,g],(function(e,n){return e.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))})),j=t(6154),w="LoaderInButton_wrapper__+RL-G",N=t(3329),y=function(){return(0,N.jsx)("div",{className:w,children:(0,N.jsx)(j.t3,{visible:!0,height:"18",width:"18",ariaLabel:"hourglass-loading",wrapperStyle:{},wrapperClass:"",colors:["#e3e3ee","#e3e3ee"]})})},k="ContactForm_form__dhl+T",L="ContactForm_label__-cVXI",Z="ContactForm_input__Bl93P",F="ContactForm_button__eSwX9",I=function(e){var n=e.name,t=e.number,r=e.handleChange,a=e.handleSubmit,c=e.isLoading,o=e.buttonText;return(0,N.jsxs)("form",{className:k,onSubmit:a,children:[(0,N.jsxs)("label",{className:L,htmlFor:"",children:["Name",(0,N.jsx)("input",{className:Z,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' \\-][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan.",required:!0,value:n,onChange:r})]}),(0,N.jsxs)("label",{className:L,htmlFor:"",children:["Number",(0,N.jsx)("input",{className:Z,type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[ .\\-\\s]?\\(?\\d{1,3}?\\)?[ .\\-\\s]?\\d{1,4}[ .\\-\\s]?\\d{1,4}[ .\\-\\s]?\\d{1,9}",title:"number number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0,value:t,onChange:r})]}),(0,N.jsx)("button",{className:F,type:"submit",children:c?(0,N.jsx)(y,{}):o})]})},T=function(){var e=(0,l.I0)(),n=(0,l.v9)(p),t=(0,l.v9)(_),s=(0,i.useState)({name:"",number:""}),h=(0,o.Z)(s,2),f=h[0],b=h[1],v=f.name,x=f.number,g=function(){var n=(0,r.Z)(u().mark((function n(){return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e((0,m.uK)(f));case 3:d.Am.success('New contact "'.concat(v,'" has been added successfully'),{position:"top-right",theme:"colored"}),b({name:"",number:""}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();return(0,N.jsx)(I,{name:v,number:x,handleChange:function(e){var n=e.currentTarget,t=n.name,r=n.value;b((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},t,r))}))},handleSubmit:function(e){e.preventDefault(),n.some((function(e){return e.name.toLowerCase()===v.toLowerCase().trim()}))?d.Am.warn("".concat(v," is already in your contacts"),{position:"top-right",theme:"colored"}):n.some((function(e){return e.number===x.trim()}))?d.Am.warn("".concat(x," is already in your contacts"),{position:"top-right",theme:"colored"}):g()},isLoading:t,buttonText:"Add contact"})},S=function(e){var n=e.contactId,t=e.currentName,s=e.currentNumber,h=e.onSave,p=(0,l.I0)(),f=(0,l.v9)(v),_=(0,i.useState)({id:n,name:t,number:s}),b=(0,o.Z)(_,2),x=b[0],g=b[1],C=x.id,j=x.name,w=x.number;console.log(C);var y=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p((0,m.Tk)(x));case 3:d.Am.success('Contact "'.concat(j,'" has been updated successfully'),{position:"top-right",theme:"colored"}),h(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return(0,N.jsx)(I,{name:j,number:w,handleChange:function(e){var n=e.currentTarget,t=n.name,r=n.value;g((function(e){return(0,c.Z)((0,c.Z)({},e),{},(0,a.Z)({},t,r))}))},handleSubmit:function(e){e.preventDefault(),y()},isLoading:f,buttonText:"Update contact"})},A=t(4164),z="Modal_backdrop__xTnIT",E="Modal_content__gGb69",B=document.querySelector("#modal-root"),P=function(e){var n=e.onClose,t=e.children;(0,i.useEffect)((function(){var e=function(e){"Escape"===e.code&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]);return(0,A.createPortal)((0,N.jsx)("div",{className:z,onClick:function(e){e.currentTarget===e.target&&n()},children:(0,N.jsx)("div",{className:E,children:t})}),B)},q="ContactItem_item__gxreB",J="ContactItem_buttons__Juk+z",X="ContactItem_button__IRFBz",D=function(e){var n=e.id,t=e.name,a=e.number,c=(0,l.I0)(),s=(0,l.v9)(b),h=(0,i.useState)(!1),p=(0,o.Z)(h,2),f=p[0],_=p[1],v=function(){return _((function(e){return!e}))},x=function(){var e=(0,r.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c((0,m.GK)(n));case 3:d.Am.success('Contact "'.concat(t,'" has been deleted successfully'),{position:"top-right",theme:"colored"}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsxs)("li",{className:q,children:[(0,N.jsxs)("p",{children:[t,": ",a]}),(0,N.jsxs)("div",{className:J,children:[(0,N.jsx)("button",{className:X,type:"button",onClick:v,children:"Update"}),(0,N.jsx)("button",{className:X,type:"button",onClick:x,children:s===n?(0,N.jsx)(y,{}):"Delete"})]})]}),f&&(0,N.jsx)(P,{onClose:v,children:(0,N.jsx)(S,{contactId:n,currentName:t,currentNumber:a,onSave:v})})]})},G=t(9645),K="ContactList_wrapper__VP-XU",M=function(){var e=(0,l.I0)(),n=(0,l.v9)(f),t=(0,l.v9)(x),r=(0,l.v9)(C);return(0,i.useEffect)((function(){e((0,m.yF)())}),[e]),(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("ul",{className:K,children:[n&&!t&&(0,N.jsx)(G.Z,{}),r.length>0&&r.map((function(e){return(0,N.jsx)(D,{id:e.id,name:e.name,number:e.number},e.id)}))]})})},U=t(4821),H="Filter_wrapper__9Ksqy",R="Filter_label__vEd1E",V="Filter_input__N7T3z",W=function(){var e=(0,l.I0)(),n=(0,l.v9)(g);return(0,N.jsx)("form",{className:H,children:(0,N.jsxs)("label",{className:R,children:["Find contacts by name",(0,N.jsx)("input",{className:V,type:"text",name:"filter",value:n,onChange:function(n){var t=n.currentTarget.value;e((0,U.T)(t))}})]})})},Y="Contacts_section__lhdxY",$="Contacts_container__TJkHA",O="Contacts_service__XBWWt",Q="Contacts_title__HJPSk",ee=function(){return(0,N.jsxs)("section",{className:Y,children:[(0,N.jsx)("h1",{className:Q,children:"Contacts"}),(0,N.jsxs)("div",{className:$,children:[(0,N.jsxs)("div",{className:O,children:[(0,N.jsx)(T,{}),(0,N.jsx)(W,{})]}),(0,N.jsx)(M,{})]})]})}}}]);
//# sourceMappingURL=925.9fb92785.chunk.js.map